graph G {
    node [ shape=box, fontsize=10, fontname="Droid Sans", style=filled, height=0.2 ]
    edge [ color=gray50, penwidth=3, fontname="Droid Sans" ]
    graph [ overlap=false ]

    subgraph main {
        node [ fillcolor=pink ]

        "Б. Акуля" [ shape=folder ]
        "Еланчик"  [ shape=folder ]

        Челябинск [ fontsize=14 ]
        Миасс [ fontsize=12 ]
        Челябинск -- Смолино -- Полетаево -- Биргильда -- Тактыбай -- Бишкиль -- Мисяш -- Чебаркуль
        Миасс -- Чебаркуль
        Непряхино -- Мисяш
        Шахматово -- Мисяш
        Медведево -- Бишкиль
        Челябинск -- Малиновка -- "Полетаево II" -- Высокий -- Тактыбай
        "Полетаево II" -- Полетаево
        Каолиновый -- "Б. Акуля" -- Кузнецкое -- Байрамгулово -- Миасский -- "Новый Миасс" -- Биккулова -- Яраткулово -- Саитова -- "Верхние Караси" -- Непряхино -- Чебаркуль -- Малково -- Сарафаново -- Кундравы
        Миасский -- Халитова -- Биккулова
        Малково -- Еланчик
        "Б. Акуля" -- Тайгинка -- Кузнецкое -- Аргаяш
        Челябинск -- Кайгородово -- Полетаево
        Ужевка -- Есаульский -- Кременкуль -- Челябинск
        Касарги -- "Большое Баландино" -- Баландино -- Челябинск
        "Северные Печи" -- Тургояк -- Миасс -- Сыростан
        Куштумга -- Тургояк -- Сыростан
        Ужевка -- "Новое Поле" -- Казанцево -- Челябинск
        "Новое Поле" -- Челябинск
        Челябинск -- Глинка -- Дубровка
    }

    subgraph north {
        node [ fillcolor=powderblue ]

        Аракуль -- Силач
    }

    subgraph penza {
        node [ fillcolor=lavender ]

        Пенза
    }

    subgraph samara {
        node [ fillcolor=cornflowerblue ]

        Самара
    }

    subgraph shemakha {
        node [ fillcolor=khaki ]

        Шемаха
    }

    subgraph mount {
        node [ fillcolor=green ]
        Златоуст [ fontsize=12 ]

        //"Чёрная скала" [ shape=hexagon, height=0.2 ]
        "Чёрная скала" -- Златоуст -- "Михеевский кордон"
        "приют Таганай" -- Златоуст
    }

    subgraph ai {
        node [ fillcolor=yellowgreen ]

        "Сикияз-Тамак" -- Межевой -- Сулея
    }

    subgraph south1 {
        node [ fillcolor=yellow ]
        "Азовское море" [ shape=folder ]
        "Азовское море" -- Голубицкая -- Темрюк -- Анапа
    }

    subgraph south2 {
        node [ fillcolor=wheat ]

        Новороссийск -- "Абрау-Дюрсо" -- Дюрсо
    }

    subgraph failed_cities {
        node [ shape="circle",fillcolor="white",color="red",fontsize=7, height=0.1 ]
        Кыштым Касли Пороги Бердяуш Вишнёвогорск Нязепетровск "Верхний Уфалей"
    }

    subgraph failed {

        // Ближние — можно пройти за час
        edge [ color=orange, fontcolor=orange, fontsize=10, penwidth=2 ]
        Каолиновый -- Кыштым [ label=2 ]
        "Михеевский кордон" -- "Северные Печи" [ label=3 ]
        Вишнёвогорск -- Аракуль  [ label=9 ]
        "Северные Печи" -- Куштумга [ label=10 ]
        Касарги -- "Новое Поле" [ label=13 ]
        "Верхний Уфалей" -- Силач [ label=15 ]

        // Ближние
        edge [ color=orangered, fontcolor=orangered, fontsize=8, penwidth=1 ]
        Пороги -- Бердяуш [ label=18 ]
        Миасс -- Кундравы  [ label=25 ]
        Аргаяш -- Касарги  [ label=23 ]
        Пороги -- Сулея  [ label=29 ]
        Кыштым -- Касли  [ label=25 ]
        Касли -- Вишнёвогорск [ label=20]

        // Средние — можно пройти за день
        edge [ color=red, fontcolor=red, style="dashed" ]
        Силач -- Кыштым  [ label=40 ]
        Анапа -- Новороссийск [ label=50 ]
        Бердяуш -- Златоуст [ label=60 ]
        Шемаха -- Нязепетровск [ label=40 ]
        "Верхний Уфалей" -- Нязепетровск [ label=45 ]
        Темрюк -- Новороссийск [ label=85 ]

        // Дальние
        edge [ color=plum, fontcolor=plum, style="dotted" ]

        // Совсем дальние — нереально проехать
        edge [ color=skyblue, fontcolor=skyblue ]
        Самара -- Пенза [ label=372 ]
        Сулея -- Самара [ label=695 ]
        Пенза -- Темрюк [ label=1250 ]
    }
}

// https://gist.github.com/shoorick/6155062
